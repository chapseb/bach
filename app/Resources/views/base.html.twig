{% set current_route = app.request.attributes.get('_route') %}
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Bach</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">
    <link href="{{ asset('css/main.css') }}" type="text/css" rel="stylesheet" media="screen" />
    <link href="{{ asset('css/bach.css') }}" type="text/css" rel="stylesheet" media="screen" />
    <link href="{{ asset('css/jquery-ui/jquery.ui.core.min.css') }}" type="text/css" rel="stylesheet" media="screen" />
    <link href="{{ asset('css/jquery-ui/jquery.ui.theme.min.css') }}" type="text/css" rel="stylesheet" media="screen" />
    <link href="{{ asset('css/jquery-ui/jquery.ui.button.min.css') }}" type="text/css" rel="stylesheet" media="screen" />
    <link href="{{ asset('css/jquery-ui/jquery.ui.resizable.min.css') }}" type="text/css" rel="stylesheet" media="screen" />
    <link href="{{ asset('css/jquery-ui/jquery.ui.dialog.min.css') }}" type="text/css" rel="stylesheet" media="screen" />
    {% block css %}{% endblock %}
    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if IE]>
    <script src="{{ asset ('js//html5-ie.js') }}"></script>
    <![endif]-->
</head>
<body>
    <nav id="main_nav" class="navbar navbar-fixed-top">
        <div class="navbar-inner">
            <div class="container-fluid">
                <a class="brand" href="#">Bach</a>
                {#<p class="navbar-text pull-right">
                    Logged in as <a href="#" class="navbar-link">Username</a>
                </p>#}
                {% block navbar %}
                <ul class="nav">
                    <li{% if current_route == 'bach_homepage' %} class="active"{% endif %}>
                        <a href="{{ path('bach_homepage') }}" data-toggle="tooltip" title="Page d'accueil de Bach">Home</a>
                    </li>
                    <li{% if current_route == 'bach_browse' %} class="active"{% endif %}>
                        <a href="{{ path('bach_browse') }}" data-toggle="tooltip" title="Navigation...">Browse</a>
                    </li>

                    <li{% if current_route|slice(0, 15) == 'bach_indexation' %} class="active"{% endif %}>
                        <a href="{{ path('bach_indexation_homepage') }}" data-toggle="tooltip" title="Gestion de l'indexation">Indexation</a>
                    </li>
                    <li{% if current_route == 'administration_dashboard' %} class="active"{% endif %}>
                        <a href="{{ url('administration_dashboard') }}" data-toggle="tooltip" title="Administration de l'application">Administration</a>
                    </li>
                    {#<li><a href="#">Aide</a></li>#}
                </ul>
                {% endblock %}
            </div><!-- /.container-fluid -->
        </div><!-- /.navbar-inner  -->
    </nav>

    {# Globally display errors #}
    {% if app.session.flashbag.has('errors') %}
    <div id="flash-errors" class="noscript">
        <h3>Error</h3>
        {% for flashMessage in app.session.flashbag.get('errors') %}
        <div class="flash-message">
            {{ flashMessage | raw }}
        </div>
        {% endfor %}
    </div>
    {% endif %}
    {# Globally display warnings #}
    {% if app.session.flashbag.has('warnings') %}
    <div id="flash-warnings" class="noscript">
        <h3>Warning</h3>
        {% for flashMessage in app.session.flashbag.get('warnings') %}
        <div class="flash-message">
            {{ flashMessage | raw }}
        </div>
        {% endfor %}
    </div>
    {% endif %}
    {% block body %}
    <div class="wrap">
        <div class="container-fluid">
            <div class="row-fluid">{% block container %} {% endblock %}</div>
        </div><!-- /.containe-fluid -->
        <!--/.fluid-container-->
        <div class="push"></div>
    </div><!-- /.wrap -->
    {% endblock %}
    {% block javascripts %}
    <!--[if lt IE 9]>
      <script src="{{ asset('js/html5.js') }}"></script>
    <![endif]-->
    <script src="{{ asset('js/jquery-1.10.2.min.js') }}" type="text/javascript"></script>
    <script src="{{ asset('js/bootstrap-dropdown.js') }}" type="text/javascript"></script>
    <script src="{{ asset('js/bootstrap-button.js') }}" type="text/javascript"></script>
    <script src="{{ asset('js/bootstrap-tooltip.js') }}" type="text/javascript"></script>
    {#<script src="{{ asset('js/bootstrap-modal.js') }}" type="text/javascript"></script>#}

    <script src="{{ asset('js/jquery-ui/jquery.ui.core.min.js')  }}" type="text/javascript"></script>
    <script src="{{ asset('js/jquery-ui/jquery.ui.widget.min.js')  }}" type="text/javascript"></script>
    <script src="{{ asset('js/jquery-ui/jquery.ui.mouse.min.js')  }}" type="text/javascript"></script>
    <script src="{{ asset('js/jquery-ui/jquery.ui.position.min.js')  }}" type="text/javascript"></script>
    <script src="{{ asset('js/jquery-ui/jquery.ui.draggable.min.js')  }}" type="text/javascript"></script>
    <script src="{{ asset('js/jquery-ui/jquery.ui.resizable.min.js')  }}" type="text/javascript"></script>
    <script src="{{ asset('js/jquery-ui/jquery.ui.button.min.js')  }}" type="text/javascript"></script>
    <script src="{{ asset('js/jquery-ui/jquery.ui.dialog.min.js')  }}" type="text/javascript"></script>

    <script src="{{ asset('js/anaphore.js') }}" type="text/javascript"></script>
    <script>
        //TODO: remove
        function closeDialog () {
            $('#coreTitleDialog').modal('hide');
            $('#renamdialog').bind('hide');
        };

        $(document).ready(function () {
            //TODO: remove or set in admin
            $('#coreTitleDialog').bind('show');
            $('#renamdialog').bind('show');

            //tooltip on each a
            $('a').tooltip({
                'selector': '',
                'placement': 'bottom'
            });

            //global help display window
            var _help = $('#help_window');

            if ( _help.length == 0 ) {
                var _help = $('<div id="help_window"><h3>Aide non disponible</h3>Aucune aide disponible pour cette partie.</div>');
                _help.appendTo('body');
            }

            _help.dialog({
                autoOpen: false,
                title: _help.children('h3:first-child').text(),
                create: function() {
                    _help.children('h3:first-child').remove();
                }
            });

            $('#show_help').click(function(){
                _help.dialog('open');
                return false;
            });

        });
    </script>
    {% endblock %}
</body>
</html>
