{% extends '::base.html.twig' %}

{% block container %}
    {# MENU #}
    {% include 'AdministrationBundle:Default:adminmenu.html.twig' %}
    <div class="content w-menu">
        <form class="form-inline" action="{{ path('administration_copyfields') }}" method="POST" {{ form_enctype(form) }}>
            <fieldset>
                <legend>{% trans %}Copy fields{% endtrans %}</legend>
                <div class="btn-toolbar">
                    <button type="submit" value="selectAll" class="btn btn-warning btn-small">
                        <span class="icon-white icon-pencil"></span> Tout séléctionner</a>
                    </button>
                    <button type="submit" value="deselectAll" class="btn btn-danger btn-small">
                        <span class="icon-white icon-repeat"></span> Ne rien séléctionner</a>
                    </button>
                    <button type="submit" value="add" class="btn btn-primary btn-small">
                        <span class="icon-white icon-random"></span> Ajouter</a>
                    </button>
                    <button type="submit" value="remove" class="btn btn-inverse btn-small">
                        <span class="icon-white icon-ban-circle"></span> Supprimer</a>
                    </button>
                </div>


                {# iterate over each existing tag and render its only field: name #}
                {% for field in form.copyFields %}
                    <div class="well">
                        <div class="row-fluid show-grid">
                            <div class="span4">source&nbsp;:&nbsp;{{ form_widget(field.source) }}</div>
                            <div class="span4">destination&nbsp;:&nbsp;{{ form_widget(field.dest) }}</div>
                            <div class="span4">Max Chars&nbsp;:&nbsp;{{ form_widget(field.maxChars) }}</div>
                        </div>
                    </div>
                    {% endfor %}
                    {{ form_widget(form._token) }}
                    <button name="submit" type="submit" class="btn btn-fixed btn-success">Valider</button>
            </fieldset>
        </form>
    </div>
        <div id="addFieldDialog" class="modal hide fade" tabindex="-1"
            role="dialog" aria-labelledby="windowTitleLabel" aria-hidden="true"
            style="display: none;">
            <div class="modal-header">
                <a href="#" class="close" data-dismiss="modal">×</a>
                <h3>Please enter a new title for this window.</h3>
            </div>
            <div class="modal-body">
                <div class="divDialogElements">
                    <input class="xlarge" id="xlInput" name="xlInput" type="text">
                </div>
            </div>
            <div class="modal-footer">
                <a href="#" class="btn" onclick="closeDialog ();">Cancel</a>
                 <a href="#" class="btn btn-primary" onclick="okClicked ();">OK</a>
            </div>
        </div>

        <script>
            $(document).ready(function() {
                $('#addFieldDialog').bind('show', function () {
                    document.getElementById ("xlInput").value = document.title;
                });
            });
            function closeDialog () {
                $('#addFieldDialog').modal('hide');
            };
            function okClicked () {
                document.title = document.getElementById ("xlInput").value;
                closeDialog ();
            };
        </script>
{% endblock %}
